function setTags(a){for(var b=a.length,c="",d=0;b>d;d++)""!==a[d].tag&&(c=""===c?a[d].tag:c+","+a[d].tag);$("#tags").val(c),fill_tags()}var tagsQuotaReached;$(document).ready(function(){var a=new Clipboard(".copy");a.on("success",function(a){$(a.trigger).find(".action-name").html("Copied!"),window.setTimeout(function(){$(a.trigger).find(".action-name").html("Copy")},1e3),a.clearSelection()}),tagsQuotaReached=!1}),$(document).on("click",".delete-tag",function(a){a.preventDefault();var b=$(this).prev().html(),c=$("#tags").val();0===c.indexOf(b)?$("#tags").val(c.replace(b+",","")):$("#tags").val(c.replace(","+b,"")),tags.excludeTag(b,function(a){alert(a)}),$(this).closest(".tag").remove(),fill_tags()}),$(document).on("click","#get-tags",function(a){tagsQuotaReached===!1?($(".explanation").addClass("hide"),$("#loading").removeClass("hide"),chrome.tabs.query({active:!0,currentWindow:!0},function(a){chrome.tabs.sendMessage(a[0].id,{please:"get tags"},function(a){if("undefined"==typeof a);else if(""===a.error){var b=new Tags("eJwVjDsKgDAUwE5Uef/P5lWKQy1YCiKe37pkCCEOGcCMBCQMjAqhKihq8Et2onAupOgJqZEYmEarIMMFASUTC1Rfn/KcvbZ5z7fubdR+bcccHxBTF9s=");b.setText(a.text),b.getTagsFull(!1,function(a){$("#loading").addClass("hide"),setTags(a)},function(a){$("#loading").addClass("hide"),$(".explanation").removeClass("hide"),$(".explanation").text(a),$("#get-tags").text("UGRADE TO PREMIUM"),$(".explanation").css("background-color","#FFDBDB"),$(".explanation").css("color","#666"),"Monthly quota reached. Please upgrade to an premium account"===a&&(tagsQuotaReached=!0)})}else alert(a.error)})})):chrome.tabs.create({url:"http://www.tags.authorship.me"})});var fill_tags=function(){var a=$("#tags").val().split(",");$(".tags-container").empty(),$.each(a,function(a,b){$(".tags-container").append("<div class='tag'><a href='#'>"+b+"</a><a class='hide delete-tag' href='#'><i class='fa fa-times-circle' aria-hidden='true'></i></a></div>")}),$("#number-of-tags").html("Number of tags: "+a.length.toString())};$(document).on("click",".email",function(){$(this).attr("href","mailto:?subject="+encodeURIComponent("Tags")+"&body="+encodeURIComponent($("#tags").val()))}),$(document).on("click",".csv",function(){var b=($("#tags").val(),[[$("#tags").val()]]),c="data:text/csv;charset=utf-8,";b.forEach(function(a,d){dataString=a.join(","),c+=d<b.length?dataString+"\n":dataString});var d=encodeURI(c);window.open(d)});
